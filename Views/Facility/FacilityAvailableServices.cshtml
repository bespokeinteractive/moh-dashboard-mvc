@model hrhdashboard.ViewModel.FacilityAssessmentViewModel;

@{
    ViewData["Title"] = "Services";
    string catg = "";
    Int64 index = 0;
    float total_norms = 0;  
    float percentage = 0;

}

<style>
    #flight-card .card-header .card-title {
        padding: 10px 20px;
    }

    #infrastructure-list td:first-child,
    #human-resources-list td:first-child {
        padding-left: 20px;
    }

    td, th {
        border-radius: 0;
        padding: 0 5px;
        line-height: 2.5em;
    }

    input:not([type]), input[type=text]:not(.browser-default), input[type=password]:not(.browser-default), input[type=email]:not(.browser-default), input[type=url]:not(.browser-default), input[type=time]:not(.browser-default), input[type=date]:not(.browser-default), input[type=datetime]:not(.browser-default), input[type=datetime-local]:not(.browser-default), input[typeAssessmenl]:not(.browser-default), input[type=number]:not(.browser-default), input[type=search]:not(.browser-default), textarea.materialize-textarea {
        border: none;
        margin: 0px;
        width: 50px;
        height: 1.2rem;
    }

    #human-resources-list td:nth-child(3),
    #infrastructure-list td:nth-child(3),
    #human-resources-list td:nth-child(4),
    #infrastructure-list td:nth-child(4),
    #infrastructure-list td:nth-child(5),
    #human-resources-list td:nth-child(5) {
        text-align: center;
    }

    button.btn {
        margin: 10px 0 50px 72px;
    }
</style>

<script src="~/js/facility-list-main.scripts.js"></script>

<div class="row" style="margin-bottom:0px; margin-left:-5.7rem; margin-right:-17.75rem">
   
    <div class="col-md-7">
        <div id="flight-card" class="card">
            <div class="card-header deep-orange accent-2">
                <div class="card-title">
                    <h4 class="flight-card-title">@Model.Selected.Name</h4>
                    <p class="flight-card-date">
                        @Model.Selected.Ward.Name > @Model.Selected.SubCounty.Name > @Model.Selected.County.Name COUNTY
                        <span class="task-cat cyan">&nbsp; @Model.Selected.Category.Name &nbsp;</span>
                        <span class="task-cat cyan">&nbsp; @Model.Selected.Category.Level.Name &nbsp;</span>
                    </p>
                </div>
            </div>

            <nav class="navbar nav-extended">
                <div class="nav-content">
                    <ul class="tabs">                 
                        <li class="tab"><a href="#infrastructure">Available Services</a></li>
                    </ul>
                </div>

                <div id="infrastructure" class="body">
                    @(catg = "")

                    @using (Html.BeginForm("PostInfrastructure", "Facility", FormMethod.Post))
                    {
                        <table id="infrastructure-list" class="bordered">
                            <thead class="deep-orange accent-1 white-text">
                                <tr>
                                    <th>&nbsp;</th>
                                    <th>Service</th>  
                                
                                   <th>Status</th>
                                </tr>
                            </thead>

                            <tbody>
                                @{
                                    total_norms = 0;
                                    
                                    percentage = 0;
                                }
                                @for (int i = 0; i < Model.Infrastructure.Count; i++)
                                {
                                    var norm = Model.Infrastructure[i];

                                    total_norms += norm.Norm;


                                    @if (!catg.Equals(norm.Item.Category.Name))
                                    {
                                        catg = norm.Item.Category.Name;
                                      

                                        index = 1;

                                            <tr style="background-color:#f2f2f2">
                                                <td>&nbsp;</td>
                                                <td colspan="1" class="bold-text">@catg</td>
                                                <td colspan="1" class="bold-text">Available</td>
                                            </tr>
                                       }
                                        else
                                       {
                                         index += 1;
                                        }
                                       }
                                </tbody>
                        </table>

                        @Html.HiddenFor(model => model.Selected.Id)
                        @Html.HiddenFor(model => model.Selected.Code)
                        @Html.HiddenFor(model => model.ActiveTab)

                       
                    }
                </div>
            </nav>

        </div>
    </div>

</div>

